<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Error_log (error-log.Error_log)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">error-log</a> &#x00BB; Error_log</nav><header class="odoc-preamble"><h1>Module <code><span>Error_log</span></code></h1><p>Error_log is an abstraction used by programs that process user programs and report located errors and warnings.</p><p>The canonical syntax for an error produced by this lib is:</p><pre class="language-ocaml"><code>File &quot;my-file&quot;, line 42, character 11-15:
Error: Some message that gives a general explanation of the issue.
Followed by more details, perhaps some sexps, etc.
((A sexp)(with more)(details)
 (such_as
  (extra_values)))</code></pre><p>It is inspired by dune's user_messages and uses dune's error message rendering under the hood.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sexp_of_t"><a href="#val-sexp_of_t" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_t : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Style"><a href="#module-Style" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Style/index.html">Style</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-warning"><a href="#val-warning" class="anchor"></a><code><span><span class="keyword">val</span> warning : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?loc</span>:<span class="xref-unresolved">Loc</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?hints</span>:<span><span><a href="Style/index.html#type-t">Style.t</a> <span class="xref-unresolved">Pp</span>.t</span> <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="Style/index.html#type-t">Style.t</a> <span class="xref-unresolved">Pp</span>.t</span> <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>Print a message with the prefix: &quot;Warning:&quot;. Warning may not be displayed depending on the command param. By default, they are printed to stderr, and do not affect the exit code of the application (it will be 0 if there are no other errors).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error"><a href="#val-error" class="anchor"></a><code><span><span class="keyword">val</span> error : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?loc</span>:<span class="xref-unresolved">Loc</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?hints</span>:<span><span><a href="Style/index.html#type-t">Style.t</a> <span class="xref-unresolved">Pp</span>.t</span> <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="Style/index.html#type-t">Style.t</a> <span class="xref-unresolved">Pp</span>.t</span> <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>Print a message with the prefix: &quot;Error:&quot;. The presence of errors will cause the final exit code to be 1. Note that this function returns <code>unit</code>, so you may report multiple errors instead of stopping at the first one. If you want to still break the flow of execution after reporting multiple errors, see <code>checkpoint</code>. If you are looking for a function to raise and bail out, see <code>raise</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-raise"><a href="#val-raise" class="anchor"></a><code><span><span class="keyword">val</span> raise : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?loc</span>:<span class="xref-unresolved">Loc</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?hints</span>:<span><span><a href="Style/index.html#type-t">Style.t</a> <span class="xref-unresolved">Pp</span>.t</span> <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="Style/index.html#type-t">Style.t</a> <span class="xref-unresolved">Pp</span>.t</span> <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Same as <code>error</code> but raises and stops the execution at this error. This is more convenient to use than <code>error</code> in code places where it's not easy to return anything meaningful in case of a fatal error. Under the hood this will raise an exception that is caught by the enclosing <code>report_and_exit</code>. Such exceptions may be caught using <code>Error.try_with</code> but they are not designed to be caught otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-info"><a href="#val-info" class="anchor"></a><code><span><span class="keyword">val</span> info : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?loc</span>:<span class="xref-unresolved">Loc</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?hints</span>:<span><span><a href="Style/index.html#type-t">Style.t</a> <span class="xref-unresolved">Pp</span>.t</span> <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="Style/index.html#type-t">Style.t</a> <span class="xref-unresolved">Pp</span>.t</span> <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>Print a message with the prefix: &quot;Info:&quot;. This is only printed when in mode verbose.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-debug"><a href="#val-debug" class="anchor"></a><code><span><span class="keyword">val</span> debug : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?loc</span>:<span class="xref-unresolved">Loc</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?hints</span>:<span><span><a href="Style/index.html#type-t">Style.t</a> <span class="xref-unresolved">Pp</span>.t</span> <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="Style/index.html#type-t">Style.t</a> <span class="xref-unresolved">Pp</span>.t</span> <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>Print a message with the prefix: &quot;Debug:&quot;. This is only printed when in mode debug.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-did_you_mean"><a href="#val-did_you_mean" class="anchor"></a><code><span><span class="keyword">val</span> did_you_mean : 
  <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">candidates</span>:<span><span class="xref-unresolved">Base</span>.string <span class="xref-unresolved">Base</span>.list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Style/index.html#type-t">Style.t</a> <span class="xref-unresolved">Pp</span>.t</span> <span class="xref-unresolved">Base</span>.list</span></span></code></div><div class="spec-doc"><p>Produces a &quot;Did you mean ...?&quot; hint (useful for typos).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-checkpoint"><a href="#val-checkpoint" class="anchor"></a><code><span><span class="keyword">val</span> checkpoint : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.unit <span class="xref-unresolved">Base</span>.Or_error.t</span></span></code></div><div class="spec-doc"><p><code>checkpoint</code> will return <code>Error e</code> if the error log has seen errors previously (warnings don't count). <code>e</code> only contains a simple statement, so it is not meant to replace the contents of the log, but simply to be passed forward to prevent other parts of the program from running.</p><p>This is useful if you are trying not to stop at the first error encountered, but still want to stop the execution at a specific breakpoint after some numbers of errors. To be used in places where it is more wise to stop the flow at a given point rather than returning meaningless data.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flush"><a href="#val-flush" class="anchor"></a><code><span><span class="keyword">val</span> flush : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p><code>flush t</code> prints to stderr all the messages currently available. This is useful for commands that have multiple parts, such as the bopkit simulator. Indeed, we want to produce all warnings on stderr prior to starting the simulation, rather than waiting until the very end of the simulation to produce all enqueued messages then.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Config"><a href="#module-Config" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Config/index.html">Config</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mode"><a href="#val-mode" class="anchor"></a><code><span><span class="keyword">val</span> mode : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Config/Mode/index.html#type-t">Config.Mode.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_debug_mode"><a href="#val-is_debug_mode" class="anchor"></a><code><span><span class="keyword">val</span> is_debug_mode : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-report_and_exit"><a href="#val-report_and_exit" class="anchor"></a><code><span><span class="keyword">val</span> report_and_exit : 
  <span><span class="label">config</span>:<a href="Config/index.html#type-t">Config.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Base</span>.unit <span class="xref-unresolved">Base</span>.Or_error.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Base</span>.unit <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">_</span></span></code></div><div class="spec-doc"><p>Wrap the execution of a program and introduce an error log to the scope. This is meant to be used inside the body of a core command. This will take care of printing the error log to stderr and handle the command exit code.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-For_test"><a href="#module-For_test" class="anchor"></a><code><span><span class="keyword">module</span> <a href="For_test/index.html">For_test</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Error"><a href="#module-Error" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Error/index.html">Error</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_with"><a href="#val-try_with" class="anchor"></a><code><span><span class="keyword">val</span> try_with : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f</span>:<span>(<span><span class="xref-unresolved">Base</span>.unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <a href="Error/index.html#type-t">Error.t</a>)</span> <span class="xref-unresolved">Base</span>.Result.t</span></span></code></div><div class="spec-doc"><p>This will only catch errors raised by <code>raise</code>, but not protect from other exceptions (if <code>f</code> raises any other exception, this function will raise too).</p></div></div></div></body></html>
